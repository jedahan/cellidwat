// Generated by CoffeeScript 2.0.0-beta8
void function () {
  var api_key, opencell_api;
  opencell_api = 'https://www.opencellid.org';
  api_key = '51846820-9224-465a-a853-53b6b227be9d';
  this.updateCellId = function () {
    return navigator.geolocation.getCurrentPosition(function (position) {
      var latmax, latmin, lonmax, lonmin, url;
      latmin = position.coords.latitude - .1;
      latmax = position.coords.latitude + .1;
      lonmin = position.coords.longitude - .1;
      lonmax = position.coords.longitude + .1;
      url = opencell_api + ('/cell/getInArea?key=' + api_key + '&format=xml');
      return $.getJSON(url + ('&latmin=' + latmin + '&latmax=' + latmax + '&lonmin=' + lonmin + '&lonmax=' + lonmax), function (response) {
        var cell;
        cell = $(response).find('rsp cell')[0];
        return localStorage.cellid = JSON.stringify({
          timestamp: new Date().getTime(),
          cellid: {
            mnc: cell.attr('mnc'),
            mcc: cell.attr('mcc')
          }
        });
      });
    });
  };
  $(document).ready(function () {
    var cache$, cellid;
    if (!(null != localStorage.cellid && (null != (cache$ = JSON.parse(localStorage.cellid)) ? cache$.timestamp : void 0) < new Date().getTime() - 2 * 60 * 1e3))
      updateCellId();
    console.log('CellID: ', cellid = JSON.parse(localStorage.cellid));
    return $('#cellid').append(cellid);
  });
}.call(this);

//# sourceMappingURL=public/scripts/main.js.map
